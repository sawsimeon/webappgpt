<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Parent Dashboard â€” Tangram Memory Puzzle</title>
    <link rel="stylesheet" href="/static/css/styles.css" />
    <style>
      .dashboard {
        max-width: 1100px;
        margin: 18px auto;
        padding: 12px;
      }
      .dashboard h1 { margin-top: 0; text-align:left; }
      .db-controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:12px }
      .db-card { background:white; padding:12px; border-radius:12px; box-shadow: var(--shadow); }
      .grid { display:grid; grid-template-columns: 1fr 320px; gap:12px; align-items:start; }
      @media (max-width:900px) { .grid { grid-template-columns: 1fr; } }
      table { width:100%; border-collapse: collapse; font-size:14px; }
      th,td { padding:8px; text-align:left; border-bottom:1px solid rgba(0,0,0,0.06) }
      .small { font-size:13px; color:var(--muted) }
      .import-input{display:none}
      .export-btn, .import-btn, .clear-btn { min-width:120px }
    </style>
  </head>
  <body>
    <div class="dashboard">
      <header style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <div>
          <h1>Parent Dashboard</h1>
          <p class="small">Overview of progress, stars and attempts. Export / import progress and reset if needed.</p>
        </div>
        <div>
          <button class="btn-secondary export-btn" id="export-btn">Export Progress</button>
          <label class="btn-large import-btn" for="import-file" style="cursor:pointer">Import Progress</label>
          <input id="import-file" class="import-input" type="file" accept="application/json" />
          <button class="btn-secondary clear-btn" id="clear-btn">Reset Progress</button>
          <a class="btn-primary" href="/" style="text-decoration:none; margin-left:10px;">Back to Game</a>
        </div>
      </header>

      <div class="grid" role="main">
        <section class="db-card" aria-label="Summary">
          <h2>Summary</h2>
          <div id="summary">
            <p class="small">Loading progress...</p>
          </div>

          <h3 style="margin-top:14px">Level breakdown</h3>
          <div id="levels-table" style="max-height:360px; overflow:auto">
            <table aria-live="polite">
              <thead>
                <tr><th>Pattern</th><th>Grid</th><th>Plays</th><th>Stars</th><th>Hints</th></tr>
              </thead>
              <tbody id="levels-body">
              </tbody>
            </table>
          </div>
        </section>

        <aside class="db-card" aria-label="Actions & insights">
          <h3>Insights</h3>
          <div id="insights">
            <p class="small">Loading...</p>
          </div>

          <h3 style="margin-top:12px">Export / Import</h3>
          <p class="small">Use export to save progress as a JSON file. Import will merge progress into localStorage.</p>

          <h3 style="margin-top:12px">Quick actions</h3>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
            <button id="download-csv" class="btn-large">Download CSV</button>
            <button id="clear-levels" class="btn-secondary">Clear Level Data</button>
          </div>

          <div style="margin-top:16px">
            <h4>Notes</h4>
            <p class="small">Progress is stored locally in the browser (localStorage). It is not sent to the server.</p>
          </div>
        </aside>
      </div>
    </div>

    <script src="/static/js/dashboard.js" defer></script>
  </body>
</html>
